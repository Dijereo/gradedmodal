make rules and calculi have state
